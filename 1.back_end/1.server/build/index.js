(()=>{var e={1134:(e,t,s)=>{s(3582);const o=s(7806),n=(s(1738),s(9470)),a=s(6860),r=s(1423),c=s(5142);var l=function(e,t,s){t.header("Access-Control-Allow-Origin",e.headers.origin),t.header("Access-Control-Allow-Credentials","true"),t.header("Access-Control-Allow-Methods","GET,PUT,POST,DELETE"),t.header("Access-Control-Allow-Headers","Origin, X-Requested-With, Content-Type, Accept,Set-Cookie"),t.header("Vary","Origin "),t.header("Cross-Origin-Resource-Policy","cross-origin"),s()};e.exports=function(e){c.config(),e.use(l),e.use(o({contentSecurityPolicy:!1})),e.use(a.urlencoded({extended:!0,limit:"2000mb"})),e.use(a.json()),e.use(l,a.static(r.join(__dirname,"../../public"))),e.use(n("combined"))}},7415:(e,t,s)=>{const o=s(6860),n=s(5303),a=s(1114),r=s(4140),c=s(186),l=s(8837),d=s(5206),u=s(9848),i=s(8751),p=s(5488),y=s(8728),m=s(8066),g=o.Router();g.use("/admin",n),g.use("/user",m),g.use("/product",y),g.use("/groupproduct",u),g.use("/order",i),g.use("/orderitem",p),g.use("/cart",r),g.use("/cartitem",c),g.use("/commentproduct",d),g.use("/blog",a),g.use("/commentblog",l),e.exports=g},3417:(e,t,s)=>{const{Sequelize:o}=s(496);s(5142).config();const{DB_NAME:n="database",DB_HOST:a="localhost",DB_USERNAME:r="root",DB_PASSWORD:c="password"}=process.env,l=new o(n,r,c,{host:a,dialect:"mysql"});e.exports=l},2835:(e,t,s)=>{const o=s(3417);e.exports=function(e){e.listen(process.env.PORT||3e3,(async()=>{try{await o.authenticate(),console.log("Connection has been established successfully.")}catch(e){console.error("Unable to connect to the database:",e)}console.log("Connect success",process.env.PORT||3e3)}))}},6666:(e,t,s)=>{const o=s(1738),n=s(1423),{v4:a}=s(5828),r=o.diskStorage({destination:function(e,t,s){var o=n.extname(t.originalname);if(".png"!==o&&".jpg"!==o&&".jpeg"!==o)return s(new Error("Only images and zip are allowed"),"Error file type!");s(null,n.join(__dirname,"../../public/api/img/product"))},filename:function(e,t,s){var o=n.extname(t.originalname);s(null,a()+o)}}),c=o({storage:r}),l=o.diskStorage({destination:function(e,t,s){var o=n.extname(t.originalname);if(".png"!==o&&".jpg"!==o&&".jpeg"!==o)return s(new Error("Only images and zip are allowed"),"Error file type!");s(null,n.join(__dirname,"../../public/api/img/blog"))},filename:function(e,t,s){var o=n.extname(t.originalname);s(null,a()+o)}}),d=o({storage:l});e.exports={uploadBlog:d,uploadProduct:c}},4857:(e,t,s)=>{const{Sequelize:o,Model:n,DataTypes:a}=s(496),r=s(3417),{v4:c}=s(5828),l=r.define("admin",{id:{type:new a.STRING(50),allowNull:!1,primaryKey:!0,unique:!0,defaultValue:()=>c()},username:{type:new a.STRING(25),allowNull:!1,unique:!0},password:{type:new a.STRING(100),allowNull:!1},createdAt:a.DATE,updatedAt:a.DATE});e.exports=l},5303:(e,t,s)=>{const o=s(6860),n=s(6847),a=o.Router();a.post("/login",n.existedAdmin,n.adminLogin),a.post("/signup",n.adminSignup),a.get("/logout",n.adminLogout),a.get("/profile",n.adminCookies),e.exports=a},6847:(e,t,s)=>{const o=s(640),{hashSync:n,compareSync:a}=s(7330),{signToken:r}=s(1068),c=s(4857);e.exports={adminCookies:async function(e,t){try{if(!new o(e,t).get("access_token"))return void t.sendStatus(401);t.sendStatus(200)}catch(e){console.log(e),t.sendStatus(500)}},existedAdmin:async function(e,t,s){try{const{username:o}=e.body,{id:n}=e.params,a={};n?a.id=ïd:a.username=o;const r=await c.findOne({where:a});return r?(t.locals.response=r,void s()):t.sendStatus(404)}catch(e){console.log(e),t.sendStatus(500)}},adminLogout:async function(e,t){try{new o(e,t).set("access_token"),t.sendStatus(200)}catch(e){console.log(e),t.sendStatus(500)}},adminSignup:async function(e,t){try{const{password:s}=e.body,a=n(s),l=await c.create({...e.body,password:a}),{id:d,username:u}=l,i=r({id:d,username:u,role:"admin"});new o(e,t).set("access_token",i,{httpOnly:!0}),t.sendStatus(201)}catch(e){console.log(e),t.sendStatus(500)}},adminLogin:async function(e,t){try{const{password:s}=e.body;if(!a(s,t.locals.response.password))return void t.sendStatus(403);const{id:n,username:c}=t.locals.response,l=r({id:n,username:c,role:"admin"});new o(e,t).set("access_token",l,{httpOnly:!0}),t.sendStatus(200)}catch(e){console.log(e),t.sendStatus(500)}}}},3484:(e,t,s)=>{const{Sequelize:o,Model:n,DataTypes:a}=s(496),r=s(3417),{v4:c}=s(5828),l=r.define("blog",{id:{type:new a.STRING(50),allowNull:!1,primaryKey:!0,unique:!0,defaultValue:()=>c()},title:{type:new a.STRING(80),allowNull:!1},image:{type:new a.STRING(50),allowNull:!1},param:{type:new a.STRING(80),allowNull:!1},description:{type:new a.STRING(100),allowNull:!1},detail:{type:a.TEXT,allowNull:!1},status:{type:a.INTEGER,defaultValue:0},createdAt:a.DATE,updatedAt:a.DATE});e.exports=l},1114:(e,t,s)=>{const o=s(6860),{uploadBlog:n}=s(6666),a=s(446),r=o.Router();r.get("/",a.blogGets),r.get("/:id",a.existedBlog,a.blogGet),r.post("/",n.single("image"),a.blogPost),r.put("/:id",a.existedBlog,n.single("image"),a.blogUpdate),r.delete("/:id",a.existedBlog,a.blogRemove),e.exports=r},446:(e,t,s)=>{const{Op:o}=s(496),n=s(7410),a=s(7693),r=s(3484);e.exports={existedBlog:async function(e,t,s){try{const{id:o}=e.params,n=await r.findOne({where:{id:o}});return n?(t.locals.response=await n,void s()):t.sendStatus(404)}catch(e){console.log(e),t.sendStatus(500)}},blogPost:async function(e,t){try{const{title:s}=e.body,o=n(s);await r.create({...e.body,param:o,image:e.file.filename}),t.sendStatus(201)}catch(e){console.log(e),t.sendStatus(500)}},blogGet:async function(e,t){try{t.status(200).json({data:t.locals.response})}catch(e){console.log(e),t.sendStatus(500)}},blogGets:async function(e,t){try{const{offset:s=0,limit:o=12}=e.query;let n=a(e);const c=await r.findAll({where:n,offset:Number(s),limit:Number(o),order:[["updatedAt","DESC"]]});t.status(200).json({data:c})}catch(e){console.log(e),t.sendStatus(500)}},blogUpdate:async function(e,t){try{const s={};e.file.filename&&(s.image=e.file.filename),t.locals.response.update({...e.body,param:n(e.body.title),...s}),t.locals.response.save(),t.sendStatus(201)}catch(e){console.log(e),t.sendStatus(500)}},blogRemove:async function(e,t){try{t.locals.response.destroy(),t.sendStatus(200)}catch(e){console.log(e),t.sendStatus(500)}}}},6243:(e,t,s)=>{const{Sequelize:o,Model:n,DataTypes:a}=s(496),r=s(3417),{v4:c}=s(5828),l=r.define("cart",{id:{type:new a.STRING(50),allowNull:!1,primaryKey:!0,unique:!0,defaultValue:()=>c()},idUser:{type:new a.STRING(50),allowNull:!1},createdAt:a.DATE,updatedAt:a.DATE});e.exports=l},4140:(e,t,s)=>{const o=s(6860),n=s(137),a=o.Router();a.get("/",n.cartGets),a.get("/:id",n.existedCart,n.cartGet),a.post("/",n.cartPost),a.put("/:id",n.existedCart,n.cartUpdate),a.delete("/:id",n.existedCart,n.cartRemove),e.exports=a},137:(e,t,s)=>{const{hashSync:o,compareSync:n}=s(7330),a=s(7693),r=s(6243);e.exports={existedCart:async function(e,t,s){try{const{id:o}=e.params,n=await r.findOne({where:{id:o}});return n?(t.locals.response=await n,void s()):t.sendStatus(404)}catch(e){console.log(e),t.sendStatus(500)}},cartPost:async function(e,t){try{await r.create(e.body),t.sendStatus(201)}catch(e){console.log(e),t.sendStatus(500)}},cartGet:async function(e,t){try{t.status(200).json({data:t.locals.response})}catch(e){console.log(e),t.sendStatus(500)}},cartGets:async function(e,t){try{const{offset:s=0,limit:o=12}=e.query;let n=a(e);const c=await r.findAll({where:n,offset:Number(s),limit:Number(o),order:[["updatedAt","DESC"]]});t.status(200).json({data:c})}catch(e){console.log(e),t.sendStatus(500)}},cartUpdate:async function(e,t){try{t.locals.response.update(e.body),t.locals.response.save(),t.sendStatus(201)}catch(e){console.log(e),t.sendStatus(500)}},cartRemove:async function(e,t){try{t.locals.response.destroy(),t.sendStatus(200)}catch(e){console.log(e),t.sendStatus(500)}}}},5479:(e,t,s)=>{const{Sequelize:o,Model:n,DataTypes:a}=s(496),r=s(3417),{v4:c}=s(5828),l=r.define("cartitem",{id:{type:new a.STRING(50),allowNull:!1,primaryKey:!0,unique:!0,defaultValue:()=>c()},idCart:{type:new a.STRING(50),allowNull:!1},idProduct:{type:new a.STRING(50),allowNull:!1},quantity:{type:new a.FLOAT,allowNull:!1},createdAt:a.DATE,updatedAt:a.DATE});e.exports=l},186:(e,t,s)=>{const o=s(6860),n=s(4109),a=o.Router();a.get("/",n.cartItemGets),a.get("/:id",n.existedCartItem,n.cartItemGet),a.post("/",n.cartItemPost),a.put("/:id",n.existedCartItem,n.cartItemUpdate),a.delete("/:id",n.existedCartItem,n.cartItemRemove),e.exports=a},4109:(e,t,s)=>{const{hashSync:o,compareSync:n}=s(7330),a=s(7693),r=s(5479);e.exports={existedCartItem:async function(e,t,s){try{const{id:o}=e.params,n=await r.findOne({where:{id:o}});return n?(t.locals.response=await n,void s()):t.sendStatus(404)}catch(e){console.log(e),t.sendStatus(500)}},cartItemPost:async function(e,t){try{await r.create(e.body),t.sendStatus(201)}catch(e){console.log(e),t.sendStatus(500)}},cartItemGet:async function(e,t){try{t.status(200).json({data:t.locals.response})}catch(e){console.log(e),t.sendStatus(500)}},cartItemGets:async function(e,t){try{let s=a(e);const o=await r.findAll({where:s,offset:Number(offset),limit:Number(limit),order:[["updatedAt","DESC"]]});t.status(200).json({data:o})}catch(e){console.log(e),t.sendStatus(500)}},cartItemUpdate:async function(e,t){try{t.locals.response.update(e.body),t.locals.response.save(),t.sendStatus(201)}catch(e){console.log(e),t.sendStatus(500)}},cartItemRemove:async function(e,t){try{t.locals.response.destroy(),t.sendStatus(200)}catch(e){console.log(e),t.sendStatus(500)}}}},6193:(e,t,s)=>{const{Sequelize:o,Model:n,DataTypes:a}=s(496),r=s(3417),{v4:c}=s(5828),l=r.define("commentblog",{id:{type:new a.STRING(50),allowNull:!1,primaryKey:!0,unique:!0,defaultValue:()=>c()},idUser:{type:new a.STRING(50),allowNull:!1},idBlog:{type:new a.STRING(50),allowNull:!1},content:{type:new a.STRING(100),allowNull:!1},createdAt:a.DATE,updatedAt:a.DATE});e.exports=l},8837:(e,t,s)=>{const o=s(6860),n=s(1367),a=o.Router();a.get("/",n.commentBlogGets),a.get("/:id",n.existedCommentBlog,n.commentBlogGet),a.post("/",n.commentBlogPost),a.put("/:id",n.existedCommentBlog,n.commentBlogUpdate),a.delete("/:id",n.existedCommentBlog,n.commentBlogRemove),e.exports=a},1367:(e,t,s)=>{const{hashSync:o,compareSync:n}=s(7330),a=s(7693),r=s(6193);e.exports={existedCommentBlog:async function(e,t,s){try{const{id:o}=e.params,n=await r.findOne({where:{id:o}});return n?(t.locals.response=await n,void s()):t.sendStatus(404)}catch(e){console.log(e),t.sendStatus(500)}},commentBlogPost:async function(e,t){try{await r.create(e.body),t.sendStatus(201)}catch(e){console.log(e),t.sendStatus(500)}},commentBlogGet:async function(e,t){try{t.status(200).json({data:t.locals.response})}catch(e){console.log(e),t.sendStatus(500)}},commentBlogGets:async function(e,t){try{let s=a(e);const o=await r.findAll({where:s,offset:Number(offset),limit:Number(limit),order:[["updatedAt","DESC"]]});t.status(200).json({data:o})}catch(e){console.log(e),t.sendStatus(500)}},commentBlogUpdate:async function(e,t){try{t.locals.response.update(e.body),t.locals.response.save(),t.sendStatus(201)}catch(e){console.log(e),t.sendStatus(500)}},commentBlogRemove:async function(e,t){try{t.locals.response.destroy(),t.sendStatus(200)}catch(e){console.log(e),t.sendStatus(500)}}}},4882:(e,t,s)=>{const{Sequelize:o,Model:n,DataTypes:a}=s(496),r=s(3417),{v4:c}=s(5828),l=r.define("commentproduct",{id:{type:new a.STRING(50),allowNull:!1,primaryKey:!0,unique:!0,defaultValue:()=>c()},idUser:{type:new a.STRING(50),allowNull:!1},idProduct:{type:new a.STRING(50),allowNull:!1},content:{type:new a.STRING(100),allowNull:!1},createdAt:a.DATE,updatedAt:a.DATE});e.exports=l},5206:(e,t,s)=>{const o=s(6860),n=s(1011),a=o.Router();a.get("/",n.commentProductGets),a.get("/:id",n.existedCommentProduct,n.commentProductGet),a.post("/",n.commentProductPost),a.put("/:id",n.existedCommentProduct,n.commentProductUpdate),a.delete("/:id",n.existedCommentProduct,n.commentProductRemove),e.exports=a},1011:(e,t,s)=>{const{hashSync:o,compareSync:n}=s(7330),a=s(4882);e.exports={existedCommentProduct:async function(e,t,s){try{const{id:o}=e.params,n=await a.findOne({where:{id:o}});return n?(t.locals.response=await n,void s()):t.sendStatus(404)}catch(e){console.log(e),t.sendStatus(500)}},commentProductPost:async function(e,t){try{await a.create(e.body),t.sendStatus(201)}catch(e){console.log(e),t.sendStatus(500)}},commentProductGet:async function(e,t){try{t.status(200).json({data:t.locals.response})}catch(e){console.log(e),t.sendStatus(500)}},commentProductGets:async function(e,t){try{let s=handleQuery(e);const o=await a.findAll({where:s,offset:Number(offset),limit:Number(limit),order:[["updatedAt","DESC"]]});t.status(200).json({data:o})}catch(e){console.log(e),t.sendStatus(500)}},commentProductUpdate:async function(e,t){try{t.locals.response.update(e.body),t.locals.response.save(),t.sendStatus(201)}catch(e){console.log(e),t.sendStatus(500)}},commentProductRemove:async function(e,t){try{t.locals.response.destroy(),t.sendStatus(200)}catch(e){console.log(e),t.sendStatus(500)}}}},8726:(e,t,s)=>{const{Sequelize:o,Model:n,DataTypes:a}=s(496),r=s(3417),{v4:c}=s(5828),l=r.define("groupproduct",{id:{type:new a.STRING(50),allowNull:!1,primaryKey:!0,unique:!0,defaultValue:()=>c()},name:{type:new a.STRING(50),allowNull:!1},name:{type:new a.STRING(50),allowNull:!1},createdAt:a.DATE,updatedAt:a.DATE});e.exports=l},9848:(e,t,s)=>{const o=s(6860),n=s(9768),a=o.Router();a.get("/",n.groupProductGets),a.get("/:id",n.existedGroupProduct,n.groupProductGet),a.post("/",n.groupProductPost),a.put("/:id",n.existedGroupProduct,n.groupProductUpdate),a.delete("/:id",n.existedGroupProduct,n.groupProductRemove),e.exports=a},9768:(e,t,s)=>{const{hashSync:o,compareSync:n}=s(7330),a=s(7693),r=s(8726);e.exports={existedGroupProduct:async function(e,t,s){try{const{id:o}=e.params,n=await r.findOne({where:{id:o}});return n?(t.locals.response=await n,void s()):t.sendStatus(404)}catch(e){console.log(e),t.sendStatus(500)}},groupProductPost:async function(e,t){try{await r.create(e.body),t.sendStatus(201)}catch(e){console.log(e),t.sendStatus(500)}},groupProductGet:async function(e,t){try{t.status(200).json({data:t.locals.response})}catch(e){console.log(e),t.sendStatus(500)}},groupProductGets:async function(e,t){try{const{offset:s=0,limit:o=12}=e.query;let n=a(e);const c=await r.findAll({where:n,offset:Number(s),limit:Number(o),order:[["updatedAt","DESC"]]});t.status(200).json({data:c})}catch(e){console.log(e),t.sendStatus(500)}},groupProductUpdate:async function(e,t){try{t.locals.response.update(e.body),t.locals.response.save(),t.sendStatus(201)}catch(e){console.log(e),t.sendStatus(500)}},groupProductRemove:async function(e,t){try{t.locals.response.destroy(),t.sendStatus(200)}catch(e){console.log(e),t.sendStatus(500)}}}},4334:(e,t,s)=>{const{Sequelize:o,Model:n,DataTypes:a}=s(496),r=s(3417),{v4:c}=s(5828),l=r.define("order",{id:{type:new a.STRING(50),allowNull:!1,primaryKey:!0,unique:!0,defaultValue:()=>c()},idUser:{type:new a.STRING(50),allowNull:!1},status:{type:a.INTEGER,defaultValue:0},createdAt:a.DATE,updatedAt:a.DATE});e.exports=l},8751:(e,t,s)=>{const o=s(6860),n=s(5942),a=o.Router();a.get("/",n.orderGets),a.get("/:id",n.existedOrder,n.orderGet),a.post("/",n.orderPost),a.put("/:id",n.existedOrder,n.orderUpdate),a.delete("/:id",n.existedOrder,n.orderRemove),e.exports=a},5942:(e,t,s)=>{const{hashSync:o,compareSync:n}=s(7330),a=s(7693),r=s(4334);e.exports={existedOrder:async function(e,t,s){try{const{id:o}=e.params,n=await r.findOne({where:{id:o}});return n?(t.locals.response=await n,void s()):t.sendStatus(404)}catch(e){console.log(e),t.sendStatus(500)}},orderPost:async function(e,t){try{await r.create(e.body),t.sendStatus(201)}catch(e){console.log(e),t.sendStatus(500)}},orderGet:async function(e,t){try{t.status(200).json({data:t.locals.response})}catch(e){console.log(e),t.sendStatus(500)}},orderGets:async function(e,t){try{let s=a(e);const o=await r.findAll({where:s,offset:Number(offset),limit:Number(limit),order:[["updatedAt","DESC"]]});t.status(200).json({data:o})}catch(e){console.log(e),t.sendStatus(500)}},orderUpdate:async function(e,t){try{t.locals.response.update(e.body),t.locals.response.save(),t.sendStatus(201)}catch(e){console.log(e),t.sendStatus(500)}},orderRemove:async function(e,t){try{t.locals.response.destroy(),t.sendStatus(200)}catch(e){console.log(e),t.sendStatus(500)}}}},9818:(e,t,s)=>{const{Sequelize:o,Model:n,DataTypes:a}=s(496),r=s(3417),{v4:c}=s(5828),l=r.define("orderitem",{id:{type:new a.STRING(50),allowNull:!1,primaryKey:!0,unique:!0,defaultValue:()=>c()},idOrder:{type:new a.STRING(50),allowNull:!1},idProduct:{type:new a.STRING(50),allowNull:!1},quantity:{type:new a.FLOAT,allowNull:!1},status:{type:a.INTEGER,defaultValue:0},createdAt:a.DATE,updatedAt:a.DATE});e.exports=l},5488:(e,t,s)=>{const o=s(6860),n=s(7672),a=o.Router();a.get("/",n.orderItemGets),a.get("/:id",n.existedOrderItem,n.orderItemGet),a.post("/",n.orderItemPost),a.put("/:id",n.existedOrderItem,n.orderItemUpdate),a.delete("/:id",n.existedOrderItem,n.orderItemRemove),e.exports=a},7672:(e,t,s)=>{const{hashSync:o,compareSync:n}=s(7330),a=s(7693),r=s(9818);e.exports={existedOrderItem:async function(e,t,s){try{const{id:o}=e.params,n=await r.findOne({where:{id:o}});return n?(t.locals.response=await n,void s()):t.sendStatus(404)}catch(e){console.log(e),t.sendStatus(500)}},orderItemPost:async function(e,t){try{await r.create(e.body),t.sendStatus(201)}catch(e){console.log(e),t.sendStatus(500)}},orderItemGet:async function(e,t){try{t.status(200).json({data:t.locals.response})}catch(e){console.log(e),t.sendStatus(500)}},orderItemGets:async function(e,t){try{let s=a(e);const o=await r.findAll({where:s,offset:Number(offset),limit:Number(limit),order:[["updatedAt","DESC"]]});t.status(200).json({data:o})}catch(e){console.log(e),t.sendStatus(500)}},orderItemUpdate:async function(e,t){try{t.locals.response.update(e.body),t.locals.response.save(),t.sendStatus(201)}catch(e){console.log(e),t.sendStatus(500)}},orderItemRemove:async function(e,t){try{t.locals.response.destroy(),t.sendStatus(200)}catch(e){console.log(e),t.sendStatus(500)}}}},9356:(e,t,s)=>{const{Sequelize:o,Model:n,DataTypes:a}=s(496),r=s(3417),{v4:c}=s(5828),l=r.define("product",{id:{type:new a.STRING(50),allowNull:!1,primaryKey:!0,unique:!0,defaultValue:()=>c()},idGroupProduct:{type:new a.STRING(50),allowNull:!1},unit:{type:new a.STRING(20),allowNull:!1},title:{type:new a.STRING(50),allowNull:!1},param:{type:new a.STRING(50),allowNull:!1},description:{type:new a.STRING(100),allowNull:!1},detail:{type:a.TEXT,allowNull:!1},price:{type:new a.STRING(10),allowNull:!1,defaultValue:0},image:{type:new a.STRING(50),allowNull:!1},status:{type:a.INTEGER,defaultValue:0},createdAt:a.DATE,updatedAt:a.DATE});e.exports=l},8728:(e,t,s)=>{const o=s(6860),{uploadProduct:n}=(s(1738),s(6666)),a=s(2169),r=o.Router();r.get("/",a.productGets),r.get("/:id",a.existedProduct,a.productGet),r.post("/",n.single("image"),a.productPost),r.put("/:id",a.existedProduct,n.single("image"),a.productUpdate),r.delete("/:id",a.existedProduct,a.productRemove),e.exports=r},2169:(e,t,s)=>{const{hashSync:o,compareSync:n}=s(7330),a=s(7410),r=s(9356),c=s(7693);e.exports={existedProduct:async function(e,t,s){try{const{id:o}=e.params,n=await r.findOne({where:{id:o}});return n?(t.locals.response=await n,void s()):t.sendStatus(404)}catch(e){console.log(e),t.sendStatus(500)}},productPost:async function(e,t){try{const{title:s}=e.body,o=a(s);await r.create({...e.body,param:o,image:e.file.filename}),t.sendStatus(201)}catch(e){console.log(e),t.sendStatus(500)}},productGet:async function(e,t){try{t.status(200).json({data:t.locals.response})}catch(e){console.log(e),t.sendStatus(500)}},productGets:async function(e,t){try{const{offset:s=0,limit:o=12}=e.query;let n=c(e);const a=await r.findAll({where:n,offset:Number(s),limit:Number(o),order:[["updatedAt","DESC"]]});t.status(200).json({data:a})}catch(e){console.log(e),t.sendStatus(500)}},productUpdate:async function(e,t){try{const s={};e.file.filename&&(s.image=e.file.filename),t.locals.response.update({...e.body,param:a(e.body.title),...s}),t.locals.response.save(),t.sendStatus(201)}catch(e){console.log(e),t.sendStatus(500)}},productRemove:async function(e,t){try{t.locals.response.destroy(),t.sendStatus(200)}catch(e){console.log(e),t.sendStatus(500)}}}},8941:(e,t,s)=>{const{Sequelize:o,Model:n,DataTypes:a}=s(496),r=s(3417),{v4:c}=s(5828),l=r.define("user",{id:{type:new a.STRING(50),allowNull:!1,primaryKey:!0,unique:!0,defaultValue:()=>c()},username:{type:new a.STRING(25),allowNull:!1,unique:!0},password:{type:new a.STRING(100),allowNull:!1},fullname:{type:new a.STRING(50),allowNull:!1},phone:{type:new a.STRING(20),allowNull:!1},address:{type:new a.STRING(50),allowNull:!1},status:{type:a.INTEGER,allowNull:!1,defaultValue:0},createdAt:a.DATE,updatedAt:a.DATE});e.exports=l},8066:(e,t,s)=>{const o=s(6860),n=s(398),a=o.Router();a.get("/",n.userGets),a.get("/cookies",n.userCookies),a.get("/logout",n.userLogout),a.get("/:id",n.existedUser,n.userGet),a.post("/login",n.existedUser,n.userLogin),a.post("/signup",n.userSignup),a.put("/:id",n.existedUser,n.userUpdate),a.delete("/:id",n.existedUser,n.userRemove),e.exports=a},398:(e,t,s)=>{const o=s(640),{hashSync:n,compareSync:a}=s(7330),{signToken:r}=s(1068),c=s(8941);e.exports={userCookies:async function(e,t){try{if(!new o(e,t).get("access_token"))return void t.sendStatus(401);t.sendStatus(200)}catch(e){console.log(e),t.sendStatus(500)}},existedUser:async function(e,t,s){try{const{username:o}=e.body,{id:n}=e.params;let a=new Object;n?a.id=n:a.username=o;const r=await c.findOne({where:a});return r?(t.locals.response=await r,void s()):t.sendStatus(404)}catch(e){console.log(e),t.sendStatus(500)}},userLogout:async function(e,t){try{new o(e,t).set("access_token"),t.sendStatus(200)}catch(e){console.log(e),t.sendStatus(500)}},userSignup:async function(e,t){try{const{password:s}=e.body,a=n(s),l=await c.create({...e.body,password:a}),{id:d,username:u}=l,i=r({id:d,username:u,role:"user"});new o(e,t).set("access_token",i,{httpOnly:!0}),t.sendStatus(201)}catch(e){console.log(e),t.sendStatus(500)}},userUpdate:async function(e,t){try{const s={...e.body};e.body.password&&(s.password=n(e.body.password)),t.locals.response.update(s),t.locals.response.save(),t.sendStatus(201)}catch(e){console.log(e),t.sendStatus(500)}},userLogin:async function(e,t){try{const{password:s}=e.body;if(!a(s,t.locals.response.password))return void t.sendStatus(403);const{id:n,username:c}=t.locals.response,l=r({id:n,username:c,role:"user"});new o(e,t).set("access_token",l,{httpOnly:!0}),t.sendStatus(200)}catch(e){console.log(e),t.sendStatus(500)}},userRemove:async function(e,t){try{t.locals.response.destroy(),t.sendStatus(200)}catch(e){console.log(e),t.sendStatus(500)}},userGets:async function(e,t){try{const e=await c.findAll({});t.status(200).json({data:e})}catch(e){console.log(e),t.sendStatus(500)}},userGet:async function(e,t){try{t.status(200).json({data:t.locals.response})}catch(e){console.log(e),t.sendStatus(500)}}}},7330:(e,t,s)=>{const o=s(7096);e.exports={hashSync:function(e){return o.hashSync(e,Number(process.env.SALTROUNDS)||10)},compareSync:function(e,t){return o.compareSync(e,t)}}},1068:(e,t,s)=>{const o=s(9344);e.exports={signToken:function(e){return o.sign(e,process.env.PRIVATE_KEY||"privatekey",{expiresIn:"1h"})},verifyToken:function(e){try{return o.verify(e,process.env.PRIVATE_KEY||"privatekey")}catch(e){return!1}}}},7410:e=>{e.exports=function(e){return(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=e.replace(/à|á|ạ|ả|ã|â|ầ|ấ|ậ|ẩ|ẫ|ă|ằ|ắ|ặ|ẳ|ẵ/g,"a")).replace(/è|é|ẹ|ẻ|ẽ|ê|ề|ế|ệ|ể|ễ/g,"e")).replace(/ì|í|ị|ỉ|ĩ/g,"i")).replace(/ò|ó|ọ|ỏ|õ|ô|ồ|ố|ộ|ổ|ỗ|ơ|ờ|ớ|ợ|ở|ỡ/g,"o")).replace(/ù|ú|ụ|ủ|ũ|ư|ừ|ứ|ự|ử|ữ/g,"u")).replace(/ỳ|ý|ỵ|ỷ|ỹ/g,"y")).replace(/đ/g,"d")).replace(/À|Á|Ạ|Ả|Ã|Â|Ầ|Ấ|Ậ|Ẩ|Ẫ|Ă|Ằ|Ắ|Ặ|Ẳ|Ẵ/g,"A")).replace(/È|É|Ẹ|Ẻ|Ẽ|Ê|Ề|Ế|Ệ|Ể|Ễ/g,"E")).replace(/Ì|Í|Ị|Ỉ|Ĩ/g,"I")).replace(/Ò|Ó|Ọ|Ỏ|Õ|Ô|Ồ|Ố|Ộ|Ổ|Ỗ|Ơ|Ờ|Ớ|Ợ|Ở|Ỡ/g,"O")).replace(/Ù|Ú|Ụ|Ủ|Ũ|Ư|Ừ|Ứ|Ự|Ử|Ữ/g,"U")).replace(/Ỳ|Ý|Ỵ|Ỷ|Ỹ/g,"Y")).replace(/Đ/g,"D")).replace(/\u0300|\u0301|\u0303|\u0309|\u0323/g,"")).replace(/\u02C6|\u0306|\u031B/g,"")).replace(/ + /g," ")).trim()).replace(/!|@|%|\^|\*|\(|\)|\+|\=|\<|\>|\?|\/|\:|\;|\'|\"|\&|\#|\[|\]|~|\$|_|`|-|{|}|\||\\/g," ")).toLowerCase().split(" ").join("-")+`-${Math.floor(5e3*Math.random()+0)}`}},7693:(e,t,s)=>{const{Op:o}=s(496);e.exports=function(e){let t={};return Object.entries(e.query).forEach((e=>{if("limit"!==e[0]&&"offset"!==e[0]){if("search"===e[0])return void(t={title:{[o.like]:`%${e[1]}%`}});t[e[0]]=e[1]}})),t}},7096:e=>{"use strict";e.exports=require("bcrypt")},640:e=>{"use strict";e.exports=require("cookies")},3582:e=>{"use strict";e.exports=require("cors")},5142:e=>{"use strict";e.exports=require("dotenv")},6860:e=>{"use strict";e.exports=require("express")},7806:e=>{"use strict";e.exports=require("helmet")},9344:e=>{"use strict";e.exports=require("jsonwebtoken")},9470:e=>{"use strict";e.exports=require("morgan")},1738:e=>{"use strict";e.exports=require("multer")},1423:e=>{"use strict";e.exports=require("path")},496:e=>{"use strict";e.exports=require("sequelize")},5828:e=>{"use strict";e.exports=require("uuid")}},t={};function s(o){var n=t[o];if(void 0!==n)return n.exports;var a=t[o]={exports:{}};return e[o](a,a.exports,s),a.exports}(()=>{const e=s(6860),t=(s(3582),s(1134)),o=s(2835),n=s(3417),a=s(7415),r=e();t(r),r.use("/api",a),n.sync({alter:!1}),o(r)})()})();